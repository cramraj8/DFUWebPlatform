{% extends "base_generic.html" %}
{% block content %}
    <div>
            <form class="form" action="/post_download/" method="post">
                    <div class="field">
                        <label class="label" for="patient_id">Patient ID</label>
                        <input class="input" type="text" name="patient_id" id="patient_id" required>
                    </div>

                    <div class="field">
                        <label class="label" for="fullname">Full Name</label>
                        <input class="input" type="text" name="fullname" id="fullname" placeholder="Full Name">
                    </div>

                    <div class="field">
                        <label class="label" for="email">Email Address</label>
                        <input class="input" type="email" name="email" id="email" placeholder="john@gmail.com">
                    </div>

                <div class="button">
                    <a href="#" class="download" onclick="downloadClick">Download</a>
                </div>
                <!-- <button type="submit">Submit</button> -->

                <div class="image_view">

                    <img src="{{img}}" id="dowloaded_image"/>

                    <!-- The Modal -->
                    <div id="myModal" class="modal">
                          <span class="close">&times;</span>
                          <img class="modal-content" id="img01">
                          <div id="caption"></div>
                    </div>

                </div>

                <div> <label class="downloadURL"></label></div>
            </form>

            <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
            <script>
                  // var config = {
                  //   'apiKey': "AIzaSyCcNlDbs4TTjWyO1y8EBj3deI9Cmk7ZR98",
                  //   'authDomain': "dfumonitoring.firebaseapp.com",
                  //   'databaseURL': "https://dfumonitoring.firebaseio.com",
                  //   'projectId': "dfumonitoring",
                  //   'storageBucket': "dfumonitoring.appspot.com",
                  //   'messagingSenderId': "52399712278"
                  // };
                  // firebase.initializeApp(config);


                  // Get a reference to the storage service, which is used to create references in your storage bucket

                  // function downloadClick(){
                      // var storage = firebase.storage();

                      // var file = document.getElementById("patient_id");

                  //     var storageRef = storage.ref();

                  //     var thisref = storage.ref('PatientFootImage/' + patient_id);
                  //     // thisref.put(file);
                  //     // var thisref = storageRef.child(file.name).put(file);

                  //     var downloadURL = thisref.downloadURL;
                  //     document.getElementById("downloadURL").value = downloadURL;

                  //     thisref.on('state_changed',function(snapshot){

                  //     console.log("file uplaoded succesfully");

                  // })
                  // };
                  // ,
                  // function(error) {

                  // },

                //   function() {
                //   // Upload completed successfully, now we can get the download URL
                //   var downloadURL = thisref.snapshot.downloadURL;
                //   console.log("got url");
                //   document.getElementById("url").value = downloadURL;
                //   alert("file uploaded successfully");
                // }
                // );

                // };
            </script>
        </div>
    </div>
{% endblock %}

